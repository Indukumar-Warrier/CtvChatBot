<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CTV Operations Chatbot</title>
    <style>
        * { box-sizing: border-box; }
        body { font-family: Arial, sans-serif; margin: 0; padding: 10px; background: #f0f0f0; min-height: 100vh; }
        .container { max-width: 800px; margin: 0 auto; }
        h1 { text-align: center; margin: 10px 0; font-size: 1.5em; }
        .chat { border: 1px solid #ccc; height: 60vh; overflow-y: auto; padding: 15px; background: white; margin: 10px 0; border-radius: 8px; }
        .message { margin: 10px 0; padding: 12px; border-radius: 8px; word-wrap: break-word; }
        .user { background: #007bff; color: white; text-align: right; margin-left: 20%; }
        .bot { background: #e9ecef; margin-right: 20%; }
        .input-area { display: flex; gap: 10px; margin: 10px 0; }
        input { flex: 1; padding: 12px; border: 1px solid #ccc; border-radius: 6px; font-size: 16px; }
        button { padding: 12px 20px; background: #007bff; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 16px; }
        button:hover { background: #0056b3; }
        .suggestions { margin: 10px 0; text-align: center; }
        .suggestions button { background: #28a745; font-size: 14px; padding: 8px 12px; margin: 5px; border-radius: 20px; }
        .suggestions button:hover { background: #1e7e34; }
        @media (max-width: 600px) {
            body { padding: 5px; }
            h1 { font-size: 1.3em; }
            .chat { height: 50vh; padding: 10px; }
            .message { padding: 10px; }
            .user { margin-left: 10%; }
            .bot { margin-right: 10%; }
            input { font-size: 16px; }
            button { padding: 10px 15px; }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ðŸ¤– CTV Operations Chatbot</h1>
        
        <div class="chat" id="chat">
            <div class="message bot">ðŸ‘‹ Hello! Ask me about CTV operations, demand management, and pole rent processes.</div>
        </div>
      
        <div class="input-area">
            <input type="text" id="input" placeholder="Type your question...">
            <button onclick="sendMessage()">Send</button>
        </div>
        
        <div class="suggestions">
            <button onclick="ask('how to verify demand')">Verify Demand</button>
            <button onclick="ask('how to create demand')">Create Demand</button>
            <button onclick="ask('how to approve demand')">Approve Demand</button>
            <button onclick="ask('how to map entity')">Map Entity</button>
        </div>
    </div>
    
    <script>
        const qaData = {"what are the prerequisites for ctv operations?": "1. Data entry up to FY 2022-23 should be completed and approved. 2. Demand for FY 2023-24 should be generated and approved. 3. Entity must be mapped with SAMAGRA based on PAN. Collections from SAMAGRA can be captured and apportioned to proper demand heads.", "how to create demand for fy 2023-24?": "Role: AB SA. Menu: Operator >> Demand >> Operator list. Click button, select Demand Notice, select Financial Year 2023-24. Security deposit is 10% of one years pole rent. If existing security deposit is less, additional amount will be generated in Q1 demand.", "how to verify demand?": "Role: DA. Menu: Operator >> Demand >> Operator list OR check ToDo list for Verify Demand Notice. Click button, select Demand Notice. Click verify button. Can return to originating user if modification needed. After verification, click approve button.", "how to approve demand?": "Role: EE. Menu: Operator >> Demand >> Operator list OR check ToDo list for Approve Demand Notice and Generate Demand. Click button, select Demand Notice. Click approve button. Can return to originating user if needed. After approval, demand is generated successfully.", "what are demand due dates and quarters?": "Cable TV operator pole rent is payable in advance for four quarters: Q1 quarter due 1 April, Q2 quarter due 1 July, Q3 quarter due 1 October, Q4 quarter due 1 January. Demand is generated in advance for all quarters.", "how to map entity with samagra?": "Menu: Operator >> Demand >> Operator list. Icons show mapping status: Yellow - entity available but not mapped, Green - mapped successfully, Red - no entity available, Blue - different PAN mapped. Click map button against entity. Green color means mapped successfully. Only green colored entity is active for collection offset.", "how to create offset and fetch collections?": "Role: Originating User. Menu: Operator >> Demand >> Operator list. Click offset button. All collections in SAMAGRA since 01.04.2023 are listed. User can offset collection in ascending order only. If first collection does not need offset, click skip button. Once clicked, collection cannot be offset later.", "how to apportion pole rent collection?": "Select pole rent checkbox and click fetch button. List of demands for head 62928 - Pole Rental Service are shown. Enter collected amount in Amount Received column against each quarter demand. Interest calculated at 12% by default (editable). Click apportion button. System generates interest from demand due date to collection date.", "how to apportion interest collection?": "Click offset button against same pole rent receipt. Select Interest/Penalty Pole rent checkbox and click fetch button. List of demands for head 62928 - Interest/Penalty on Pole Rent are shown. Enter collected amount against each quarter demand. Click apportion button. Provision available for revoking last apportion.", "how to apportion security deposit collection?": "Same procedure as pole rent collection. Select security deposit checkbox, click fetch button, enter collected amount, and click apportion button. Receipt amount more than demand can be taken as advance. Receipt amount less than demand will generate arrear in next demand.", "what is security deposit requirement?": "10% of one years pole rent should be taken as security deposit. While generating demand for financial year, if existing security deposit is less, then additional Security Deposit will be generated along with pole rent in Q1 quarter demand.", "how to handle advance collection?": "If FY 2023-24 demand paid in advance before 01.04.2023, it can be taken as Advance Collection. Click advance collection button. Copy advance collection receipt number from SAMAGRA and paste here. Click add button, then offset collection.", "how to view outstanding demand report?": "Option 1: From menu Report >> Outstanding Demand Report. Click view button to see profile and outstanding demand of operator. Option 2: Menu Operator >> Operator list, click view button against operator to see outstanding amounts quarter wise at bottom of page.", "how to create demand for fy 2024-25?": "Prerequisites: Ensure FY 2023-24 demand generated, approved and collections apportioned through CTV app. Verify outstanding pole rent demand report amounts. Then create demand for FY 2024-25 following same process: AB SA creates, DA verifies, EE approves.", "what are the user roles and responsibilities?": "AB SA (Originating User): Creates demand notices and initiates processes. DA (Verifying User): Verifies demand notices and can return for modifications. EE (Approving Officer): Final approval of demand notices and generates demands. All roles access through Division level menus.", "what are the important account heads?": "Head 62928 - Pole Rental Service for pole rent collections. Head 62928 - Interest/Penalty on Pole Rent for interest collections. Head 62908 - Pole Rental Service also appears in some contexts. Collections are apportioned to proper demand heads of accounts.", "how does the system handle collections and adjustments?": "All collections in SAMAGRA of operators with entity type Cable TV Operator (account heads related to pole rent & security deposit) since 01.04.2023 are listed. Collections in SARAS and adjustments through journal entry in SARAS will not be available for collection apportioning.", "what happens with receipt amounts and demands?": "If receipt amount is more than demand amount, excess can be taken as advance. If receipt amount is less than demand amount, shortfall will be generated as arrear in next demand. Receipt amount in one head of account cannot be apportioned to another head of account.", "how to revoke apportionments?": "Provision available for revoking the last apportion. To revoke last apportion, click revoke button. Must revoke last apportion first before making new apportionments. Click view button to see apportioned details and generated interests.", "what are the system navigation menus?": "Main navigation: Operator >> Demand >> Operator list for most operations. Report >> Outstanding Demand Report for viewing reports. ToDo list in dashboard shows pending tasks like Verify Demand Notice and Approve Demand Notice and Generate Demand.", "how to handle dummy pan mapping?": "If dummy PAN is mapped in SAMAGRA and collection taken, first map with dummy PAN for offsetting collection against dummy PAN. After doing this, re-map with original PAN of the operator."};
        const keywords = {"prerequisites": ["what are the prerequisites for ctv operations?"], "requirements": ["what are the prerequisites for ctv operations?"], "data entry": ["what are the prerequisites for ctv operations?"], "create demand": ["how to create demand for fy 2023-24?"], "demand creation": ["how to create demand for fy 2023-24?"], "generate demand": ["how to create demand for fy 2023-24?"], "fy 2023-24": ["how to create demand for fy 2023-24?"], "verify demand": ["how to verify demand?"], "demand verification": ["how to verify demand?"], "approve demand": ["how to approve demand?"], "demand approval": ["how to approve demand?"], "due dates": ["what are demand due dates and quarters?"], "demand dates": ["what are demand due dates and quarters?"], "quarter dates": ["what are demand due dates and quarters?"], "quarters": ["what are demand due dates and quarters?"], "map entity": ["how to map entity with samagra?"], "entity mapping": ["how to map entity with samagra?"], "samagra mapping": ["how to map entity with samagra?"], "offset": ["how to create offset and fetch collections?"], "create offset": ["how to create offset and fetch collections?"], "collection offset": ["how to create offset and fetch collections?"], "fetch collections": ["how to create offset and fetch collections?"], "apportion pole rent": ["how to apportion pole rent collection?"], "pole rent collection": ["how to apportion pole rent collection?"], "pole rent apportion": ["how to apportion pole rent collection?"], "apportion interest": ["how to apportion interest collection?"], "interest collection": ["how to apportion interest collection?"], "penalty collection": ["how to apportion interest collection?"], "apportion security deposit": ["how to apportion security deposit collection?"], "security deposit collection": ["how to apportion security deposit collection?"], "security deposit": ["what is security deposit requirement?"], "deposit requirement": ["what is security deposit requirement?"], "security deposit calculation": ["what is security deposit requirement?"], "advance collection": ["how to handle advance collection?"], "advance payment": ["how to handle advance collection?"], "advance receipt": ["how to handle advance collection?"], "outstanding report": ["how to view outstanding demand report?"], "demand report": ["how to view outstanding demand report?"], "view report": ["how to view outstanding demand report?"], "outstanding demand": ["how to view outstanding demand report?"], "create demand 2024-25": ["how to create demand for fy 2024-25?"], "demand creation 2024-25": ["how to create demand for fy 2024-25?"], "fy 2024-25": ["how to create demand for fy 2024-25?"], "user roles": ["what are the user roles and responsibilities?"], "responsibilities": ["what are the user roles and responsibilities?"], "ab sa": ["what are the user roles and responsibilities?"], "da": ["what are the user roles and responsibilities?"], "ee": ["what are the user roles and responsibilities?"], "account heads": ["what are the important account heads?"], "head codes": ["what are the important account heads?"], "62928": ["what are the important account heads?"], "62908": ["what are the important account heads?"], "collections": ["how does the system handle collections and adjustments?"], "adjustments": ["how does the system handle collections and adjustments?"], "saras": ["how does the system handle collections and adjustments?"], "journal entry": ["how does the system handle collections and adjustments?"], "receipt amounts": ["what happens with receipt amounts and demands?"], "demand amounts": ["what happens with receipt amounts and demands?"], "advance": ["what happens with receipt amounts and demands?"], "arrear": ["what happens with receipt amounts and demands?"], "revoke apportion": ["how to revoke apportionments?"], "revoke apportionment": ["how to revoke apportionments?"], "undo apportion": ["how to revoke apportionments?"], "navigation": ["what are the system navigation menus?"], "menus": ["what are the system navigation menus?"], "operator menu": ["what are the system navigation menus?"], "report menu": ["what are the system navigation menus?"], "dummy pan": ["how to handle dummy pan mapping?"], "pan mapping": ["how to handle dummy pan mapping?"], "dummy mapping": ["how to handle dummy pan mapping?"]};
        const pdfChunks = ["Cable TV Application Collection offset and Apportion - Help Before Creating Demand for FY 2024-25, following should be ensured 1.Data entry up to FY 2022-23 to be completed. 2.Demand generation for FY 2023-24 a. Create demand for FY 2023-24 \u2013 AB SA b. Verify demand for FY 2023-24 \u2013 DA c. Approve demand for FY 2023-24 \u2013 EE 3. Entity mapping with SAMAGRA based on PAN. 4.Create Offset, Fetch Invoice item Demands and Collection apportion A.Pole rent Collection apportion B. Interest Collection apportion C.Security Deposit Collection apportion 5. Outstanding Demand Report 6. Advance collection of 2023-24 Demand Creation for FY 2024-25 a.Create demand for FY 2023-24 \u2013 AB SA b.Verify demand for FY 2023-24 \u2013 DA c.Approve demand for FY 2023-24 \u2013 EE Collection offset and Apportion for FY 2023-24 Pre-requisite 1. Data entry up to FY 2022-23 of operators should be done and approved 2. The demand for the financial year 2023-24 of operators should be generated and approved 3. Entity to be mapped with SAMAGRA based on PAN \uf0d8 For those who have paid through SAMAGRA on or after 01.04.2023, it is possible to capture the collected demand from SAMAGRA to CTV. \uf0d8 The captured amount can be apportioned to the proper Demand heads of accounts 1. Data entry up to FY 2022-23 to be completed 2. Demand generation for FY 2023-24 a. Create demand for FY 2023-24 \u2013 AB SA b.Verify demand -DA c. Approve Demand - EE \uf076 A cable TV operator's pole rent is payable in advance. \uf076 Demand is generated in advance for four quarters Q1, Q2, Q3 and Q4 \uf076 Demand due date is \uf0b7 Q1 quarter \u2013 1 April \uf0b7 Q2 quarter \u2013 1 July \uf0b7 Q3 quarter \u2013 1 October \uf0b7 Q4 quarter \u2013 1 January If the existing security deposit", "is less, then additional \uf076 Security Deposit will be generated along with pole rent in Q1 demand. \uf07610% of one year's pole rent of an operator should be taken as security deposit. a. Create demand for FY 2023-24 \u2013 AB SA Role : Originating User \u2013 Division \u2013 AB SA Menu: Operator >> Demand >> Operator list \uf0b7 Click on button \uf0b7 Select \u201cDemand Notice\u201d from the dropdown list \uf0b7 Select \u201cFinancial Year 2023-24\u201d \uf0b7 Then click on button \uf0d8 Security Deposit - 10% of one year's pole rent of an operator should be taken as security deposit. o While generating demand for a financial year, if the existing security deposit is less, then Security Deposit will be generated along with pole rent in Q1 quarter. \uf0d8 Pole Rent FY 2023-24 \u2013 Section name, Purpose, Local body, No. of Poles and Abstract pole rent are shown here. \uf0d8 Pole Rent Remittances \u2013 Previous year demand and remittance details are shown here \uf0d8 Pole Rent 2023-24 Quarter Wise \u2013 Quarter wise pole rent split-up details and Security Deposit demand are shown here. \uf0b7 Enter additional remarks and click on button b.Verify demand for FY 2023-24 \u2013 DA Role : Verifying User \u2013 Division - DA Menu: Operator >> Demand >> Operator list OR The pending tasks are listed in the ToDo list of the dashboard as \u201cVerify Demand Notice\u201d \uf0b7 Click on button \uf0b7 Select \u201cDemand Notice\u201d from the dropdown list \uf0d8 Click on button \uf0d8 If wish to return to the originating user, then click on button \uf0d8 The Originating User can delete the Demand if modification is needed. Else can continue with the demand. \uf0d8 After verification, click on button c. Approve demand for FY 2023-24 \u2013 EE Role : Approving Oficer \u2013 Division - EE Menu: Operator >>", "Demand >> Operator list OR The pending tasks are listed in the ToDo list of the dashboard as \u201cApprove Demand Notice and Generate Demand\u201d \uf0b7 Click on button \uf0b7 Select \u201cDemand Notice\u201d from the dropdown list \uf0d8 Click on button \uf0d8 If wish to return to the originating user, then click on button \uf0d8 After verification, click on button Demand Notice Approved and Generate Demand successfully 3. Entity mapping with SAMAGRA based on PAN Procedure for entity mapping with SAMAGRA Role : Originating User \u2013 Division Menu: Operator >> Demand >> Operator list o Meaning of icons - Cable TV Operator Entity with the same PAN number is available in SAMAGRA but mapping is not done with CTV. (Action \u2013 To be map entity with same PAN number) - Operator whose Entity with the same PAN number has been Mapped with SAMAGRA (Action - No action needed) - No entity is available in SAMAGRA with the same PAN number (Action - Create a new entity with same PAN number in SAMAGRA as Cable TV Operator and then map) - Entity with another PAN number is mapped with SAMAGRA To map an entity, click on button See that the mapped entity list is empty Click on button against the entity A warning pop-up window opens, Click on button A pop-up message is shown as mapped successfully After mapping you can see the mapped entity list with green colour. User can also map an entity with a different PAN number If a dummy PAN is mapped in SAMAGRA and taken collection, first map with the dummy PAN for offsetting collection against dummy PAN. After doing this, re-map with original PAN of the operator. \uf0b7 Click on \u201cList all entities in ERP\u201d \uf0b7 Click on button against the entity \uf0b7 Now the newly", "mapped entity is added to the \u201cMapped entity\u201d list \uf0b7 Added \"green\" color to newly mapped entity \uf0b7 The color of the existing entity is changed to \"blue\" \uf0b7 Only the green coloured entity is active and the collection offset is available only from this entity 4. Create Offset, Fetch Invoice item Demands and Collection apportion Role : Originating User \u2013 Division Menu: Operator >> Demand >> Operator list Click on button Click on button \uf0d8 All collections in SAMAGRA of the operators whose entity type as \u201cCable TV Operator\u201d (account heads relted to pole rent & security deposit) since 01.04.2023 are listed here. \uf0d8 Collections in SARAS and adjustments through journal entry in SARAS will not be available for collection apportioning. \uf0d8 user can offset the collection by the ascending order only. \uf0d8 If the first collection doesn't need an offset, then click on the button. \uf0d8 Once clicked, the collection cannot be offset later. \uf0d8 After that, the second collection can be offset \uf076 Through this menu, users can apportion the following item head collections separately A. Pole Rent Collection Apportion B. Pole Rent Interest / Penalty Collection apportion C. Security Deposit Collection Apportion \uf076 If the receipt amount is more than the demand amount then that amount can be taken as advance \uf076The receipt amount in one head of account cannot be apportioned to another head of account \uf0d8 Click on button for offset a collection a. Pole rent Collection apportion \uf0d8 Receipt details and Invoice details are shown above \uf0d8 If both pole rent and interest are demanded on the same invoice, both will be shown there \uf0d8 In that case, first, click the pole rent check box and forward \uf0d8 The system itself will generate the interest from the demand due date or the last", "collection date to the collection date of each quarter's pole rent collection. \uf0d8 Select the Pole rent check box and \uf0d8 Click on button for fetching \uf0d8 List of Demands for Selected Head - 62928 - Pole Rental Service are listed here \uf0d8 Balance Receipt Amount to be Apportioned \u2013 The Receipt amount for the selected head is visible here \uf0d8 It can be forwarded only after apportioning the entire Receipt amount collected under a head. \uf0d8 If the receipt amount is more than the demand amount apportioned, then that amount can be taken as advance. \uf0d8 If the receipt amount is less than the demand amount apportioned, then that amount will be generated as arrear in the next demand. \uf0d8 Amount Received - Enter the collected amount in the column \u201cAmount Received\u201d against the demand for each quarter \uf0d8 Demand Due Date - The demand due date is automatically filled every quarter \uf0d8 Previous payment date (if any) \u2013 If any part payment of a demand has been made earlier, then that date should be selected here \uf0d8 Interest calculation rate \u2013 By default 12% interest is calculated, user can edit if needed \uf0d8 Click on button \uf0d8 Provision available for revoking the last apportion \uf0d8 To revoke the last apportion, click on button \uf0d8 Revoke last apportion first. \uf0d8 Click on button to view the apportioned details and generated interests. \uf0d8 Apportioned Demands \u2013 Apportioned demand and GST rate is shown here \uf0d8 Generated Interest Records - Interest generated and GST rate are shown here \uf0d8 This generated interest should be apportioned in next step b. Interest Collection apportion \uf0d8 Click on button \uf0d8 Click on button against the same pole rent collected receipt. \uf0d8 Now only available the interest demand. \uf0d8 Select \u201cInterest/Penalty Pole rent\u201d rent check", "box and \uf0d8 Click on button for fetching \uf0d8 List of Demands for Selected Head - 62928 \u2013 Interest/ Penalty on Pole Rent are listed here \uf0d8 List of Demands for Selected Head - 62908 - Pole Rental Service are listed here \uf0d8 Balance Receipt Amount to be Apportioned \u2013 The Receipt amount for the selected head is visible here \uf0d8 It can be forwarded only after apportioning the entire Receipt amount collected under a head. \uf0d8 If the receipt amount is more than the demand amount then that amount can be taken as advance \uf0d8 Amount Received - Enter the collected amount in the column \u201cAmount Received\u201d against the demand for each quarter \uf0d8 Demand Due Date - The demand due date is automatically filled every quarter \uf0d8 Previous payment date (if any) \u2013 If any part payment of a demand has been made earlier, then that date should be selected here Click on button \uf0d8 Provision available for revoking the last apportion \uf0d8 To revoke the last apportion , click on button \uf0d8 Click on button to view the apportioned details \uf0d8 Apportioned Demands \u2013 Apportioned interest and GST rate is shown here c. Security Deposit Collection apportion - Same procedure as Pole rent collection, above - Advance collection offsetting 5. If the demand for the Financial Year 2023-24 is paid in advance before 01.04.2023, it can be taken as Advance Collection. . Click on button Click on button Advance collections of FY 23-24 taken can be added here \uf0b7 Copy Advance collection Receipt number from SAMAGRA and Paste here \uf0b7 Click on button \uf0b7 Then offset collection 6. Outstanding Demand Report Option # 1 From the menu Report >> Outstanding Demand Report To view profile and Outstanding demand of an operator, Click on button Option # 2", "Users can view the outstanding demand from the operator\u2019s profile Menu: Operator >> Operator list \uf0d8 Click on button against the operator \uf0d8 At the bottom of the page, you can view the outstanding amount of 2023- 24 quarter wise 7. Demand Creation for FY 2024-25 \uf0fc Please ensure that the demand for the FY 2023-24 has been generated & approved and the collections have been apportioned through ctv app, before generating the demand for the FY 2024-25. \uf0fc The amounts mentioned in the outstanding pole rent demand report may also be verified. \uf0fc Then generate demand for the FY 2024-25. a. Create demand for FY 2024-25 \u2013 AB SA b.Verify demand -DA c. Approve Demand - EE a. Create demand for FY 2024-25 \u2013 AB SA Role : Originating User \u2013 Division \u2013 AB SA Menu: Operator >> Demand >> Operator list \uf0b7 Click on button \uf0b7 Select \u201cDemand Notice\u201d from the dropdown list \uf0b7 Select \u201cFinancial Year 2024-25\u201d \uf0b7 Then click on button \uf0d8 Security Deposit - 10% of one year's pole rent of an operator should be taken as security deposit. o While generating demand for a financial year, if the existing security deposit is less, then Security Deposit will be generated along with pole rent in Q1 quarter. \uf0d8 Pole Rent FY 2024-25 \u2013 Section name, Purpose, Local body, No. of Poles and Abstract pole rent are shown here. \uf0d8 Pole Rent Remittances \u2013 Previous year demand and remittance details are shown here \uf0d8 Pole Rent 2024-25 Quarter Wise \u2013 Quarter wise pole rent split-up details and Security Deposit demand are shown here. \uf0b7 Enter additional remarks and click on button d.Verify demand for FY 2024-25 \u2013 DA Role : Verifying User \u2013 Division - DA Menu: Operator >> Demand >> Operator list OR The pending", "tasks are listed in the ToDo list of the dashboard as \u201cVerify Demand Notice\u201d \uf0b7 Click on button \uf0b7 Select \u201cDemand Notice\u201d from the dropdown list \uf0d8 Click on button \uf0d8 If wish to return to the originating user, then click on button \uf0d8 After verification, click on button Approve demand for FY 2024-25 \u2013 EE e. Role : Approving Oficer \u2013 Division - EE Menu: Operator >> Demand >> Operator list OR The pending tasks are listed in the ToDo list of the dashboard as \u201cApprove Demand Notice and Generate Demand\u201d \uf0b7 Click on button \uf0b7 Select \u201cDemand Notice\u201d from the dropdown list \uf0d8 Click on button \uf0d8 If wish to return to the originating user, then click on button \uf0d8 After verification, click on button Demand Notice Approved and Generate Demand successfully"];
        const qaPairs = [{"question": "What are the prerequisites for CTV operations?", "answer": "1. Data entry up to FY 2022-23 should be completed and approved. 2. Demand for FY 2023-24 should be generated and approved. 3. Entity must be mapped with SAMAGRA based on PAN. Collections from SAMAGRA can be captured and apportioned to proper demand heads.", "keywords": ["prerequisites", "requirements", "data entry"], "matching_words": ["prerequisite", "requirement", "data", "entry", "fy 2022-23", "approved"]}, {"question": "How to create demand for FY 2023-24?", "answer": "Role: AB SA. Menu: Operator >> Demand >> Operator list. Click button, select Demand Notice, select Financial Year 2023-24. Security deposit is 10% of one years pole rent. If existing security deposit is less, additional amount will be generated in Q1 demand.", "keywords": ["create demand", "demand creation", "generate demand", "fy 2023-24"], "matching_words": ["demand", "create", "generate", "ab sa", "notice", "2023-24", "financial year"]}, {"question": "How to verify demand?", "answer": "Role: DA. Menu: Operator >> Demand >> Operator list OR check ToDo list for Verify Demand Notice. Click button, select Demand Notice. Click verify button. Can return to originating user if modification needed. After verification, click approve button.", "keywords": ["verify demand", "demand verification"], "matching_words": ["verify", "verification", "da", "check", "todo", "modify"]}, {"question": "How to approve demand?", "answer": "Role: EE. Menu: Operator >> Demand >> Operator list OR check ToDo list for Approve Demand Notice and Generate Demand. Click button, select Demand Notice. Click approve button. Can return to originating user if needed. After approval, demand is generated successfully.", "keywords": ["approve demand", "demand approval"], "matching_words": ["approve", "approval", "ee", "final", "generate", "successfully"]}, {"question": "What are demand due dates and quarters?", "answer": "Cable TV operator pole rent is payable in advance for four quarters: Q1 quarter due 1 April, Q2 quarter due 1 July, Q3 quarter due 1 October, Q4 quarter due 1 January. Demand is generated in advance for all quarters.", "keywords": ["due dates", "demand dates", "quarter dates", "quarters"], "matching_words": ["due", "dates", "quarter", "april", "july", "october", "january", "advance", "payable"]}, {"question": "How to map entity with SAMAGRA?", "answer": "Menu: Operator >> Demand >> Operator list. Icons show mapping status: Yellow - entity available but not mapped, Green - mapped successfully, Red - no entity available, Blue - different PAN mapped. Click map button against entity. Green color means mapped successfully. Only green colored entity is active for collection offset.", "keywords": ["map entity", "entity mapping", "samagra mapping"], "matching_words": ["map", "entity", "samagra", "pan", "green", "yellow", "blue", "red", "icons"]}, {"question": "How to create offset and fetch collections?", "answer": "Role: Originating User. Menu: Operator >> Demand >> Operator list. Click offset button. All collections in SAMAGRA since 01.04.2023 are listed. User can offset collection in ascending order only. If first collection does not need offset, click skip button. Once clicked, collection cannot be offset later.", "keywords": ["offset", "create offset", "collection offset", "fetch collections"], "matching_words": ["offset", "collection", "samagra", "ascending", "skip", "fetch", "01.04.2023"]}, {"question": "How to apportion pole rent collection?", "answer": "Select pole rent checkbox and click fetch button. List of demands for head 62928 - Pole Rental Service are shown. Enter collected amount in Amount Received column against each quarter demand. Interest calculated at 12% by default (editable). Click apportion button. System generates interest from demand due date to collection date.", "keywords": ["apportion pole rent", "pole rent collection", "pole rent apportion"], "matching_words": ["apportion", "pole rent", "collection", "amount received", "interest", "12%", "62928", "quarter"]}, {"question": "How to apportion interest collection?", "answer": "Click offset button against same pole rent receipt. Select Interest/Penalty Pole rent checkbox and click fetch button. List of demands for head 62928 - Interest/Penalty on Pole Rent are shown. Enter collected amount against each quarter demand. Click apportion button. Provision available for revoking last apportion.", "keywords": ["apportion interest", "interest collection", "penalty collection"], "matching_words": ["apportion", "interest", "penalty", "collection", "revoke", "62928", "quarter"]}, {"question": "How to apportion security deposit collection?", "answer": "Same procedure as pole rent collection. Select security deposit checkbox, click fetch button, enter collected amount, and click apportion button. Receipt amount more than demand can be taken as advance. Receipt amount less than demand will generate arrear in next demand.", "keywords": ["apportion security deposit", "security deposit collection"], "matching_words": ["apportion", "security deposit", "collection", "advance", "arrear", "procedure"]}, {"question": "What is security deposit requirement?", "answer": "10% of one years pole rent should be taken as security deposit. While generating demand for financial year, if existing security deposit is less, then additional Security Deposit will be generated along with pole rent in Q1 quarter demand.", "keywords": ["security deposit", "deposit requirement", "security deposit calculation"], "matching_words": ["security", "deposit", "10%", "pole rent", "q1", "additional", "existing"]}, {"question": "How to handle advance collection?", "answer": "If FY 2023-24 demand paid in advance before 01.04.2023, it can be taken as Advance Collection. Click advance collection button. Copy advance collection receipt number from SAMAGRA and paste here. Click add button, then offset collection.", "keywords": ["advance collection", "advance payment", "advance receipt"], "matching_words": ["advance", "collection", "receipt", "samagra", "paste", "copy", "01.04.2023"]}, {"question": "How to view outstanding demand report?", "answer": "Option 1: From menu Report >> Outstanding Demand Report. Click view button to see profile and outstanding demand of operator. Option 2: Menu Operator >> Operator list, click view button against operator to see outstanding amounts quarter wise at bottom of page.", "keywords": ["outstanding report", "demand report", "view report", "outstanding demand"], "matching_words": ["outstanding", "report", "view", "demand", "quarter", "profile", "operator"]}, {"question": "How to create demand for FY 2024-25?", "answer": "Prerequisites: Ensure FY 2023-24 demand generated, approved and collections apportioned through CTV app. Verify outstanding pole rent demand report amounts. Then create demand for FY 2024-25 following same process: AB SA creates, DA verifies, EE approves.", "keywords": ["create demand 2024-25", "demand creation 2024-25", "fy 2024-25"], "matching_words": ["demand", "create", "2024-25", "prerequisite", "verify", "outstanding", "ab sa", "da", "ee"]}, {"question": "What are the user roles and responsibilities?", "answer": "AB SA (Originating User): Creates demand notices and initiates processes. DA (Verifying User): Verifies demand notices and can return for modifications. EE (Approving Officer): Final approval of demand notices and generates demands. All roles access through Division level menus.", "keywords": ["user roles", "responsibilities", "ab sa", "da", "ee"], "matching_words": ["roles", "responsibilities", "ab sa", "da", "ee", "originating", "verifying", "approving", "division"]}, {"question": "What are the important account heads?", "answer": "Head 62928 - Pole Rental Service for pole rent collections. Head 62928 - Interest/Penalty on Pole Rent for interest collections. Head 62908 - Pole Rental Service also appears in some contexts. Collections are apportioned to proper demand heads of accounts.", "keywords": ["account heads", "head codes", "62928", "62908"], "matching_words": ["account", "heads", "62928", "62908", "pole rental", "interest", "penalty", "service"]}, {"question": "How does the system handle collections and adjustments?", "answer": "All collections in SAMAGRA of operators with entity type Cable TV Operator (account heads related to pole rent & security deposit) since 01.04.2023 are listed. Collections in SARAS and adjustments through journal entry in SARAS will not be available for collection apportioning.", "keywords": ["collections", "adjustments", "saras", "journal entry"], "matching_words": ["collections", "adjustments", "saras", "samagra", "journal", "entry", "cable tv operator", "01.04.2023"]}, {"question": "What happens with receipt amounts and demands?", "answer": "If receipt amount is more than demand amount, excess can be taken as advance. If receipt amount is less than demand amount, shortfall will be generated as arrear in next demand. Receipt amount in one head of account cannot be apportioned to another head of account.", "keywords": ["receipt amounts", "demand amounts", "advance", "arrear"], "matching_words": ["receipt", "amount", "demand", "advance", "arrear", "excess", "shortfall", "head", "account"]}, {"question": "How to revoke apportionments?", "answer": "Provision available for revoking the last apportion. To revoke last apportion, click revoke button. Must revoke last apportion first before making new apportionments. Click view button to see apportioned details and generated interests.", "keywords": ["revoke apportion", "revoke apportionment", "undo apportion"], "matching_words": ["revoke", "apportion", "apportionment", "undo", "last", "provision", "details"]}, {"question": "What are the system navigation menus?", "answer": "Main navigation: Operator >> Demand >> Operator list for most operations. Report >> Outstanding Demand Report for viewing reports. ToDo list in dashboard shows pending tasks like Verify Demand Notice and Approve Demand Notice and Generate Demand.", "keywords": ["navigation", "menus", "operator menu", "report menu"], "matching_words": ["navigation", "menu", "operator", "demand", "report", "todo", "dashboard", "pending", "tasks"]}, {"question": "How to handle dummy PAN mapping?", "answer": "If dummy PAN is mapped in SAMAGRA and collection taken, first map with dummy PAN for offsetting collection against dummy PAN. After doing this, re-map with original PAN of the operator.", "keywords": ["dummy pan", "pan mapping", "dummy mapping"], "matching_words": ["dummy", "pan", "mapping", "original", "re-map", "offsetting"]}];
        
        function findAnswer(question) {
            const q = question.toLowerCase().trim();
            
            // Step 1: First check for complete phrase matches in keywords
            for (let pair of qaPairs) {
                for (let keyword of pair.keywords) {
                    if (keyword.toLowerCase() === q) {
                        return pair.answer;
                    }
                    // Check for meaningful phrase matches (2+ words)
                    if (keyword.split(' ').length >= 2 && q.includes(keyword.toLowerCase())) {
                        return pair.answer;
                    }
                }
            }
            
            // Step 2: Check exact match in Q&A
            if (qaData[q]) return qaData[q];
            
            // Step 3: Check single keyword matches
            for (let pair of qaPairs) {
                for (let keyword of pair.keywords) {
                    if (keyword.split(' ').length === 1 && q.includes(keyword.toLowerCase())) {
                        return pair.answer;
                    }
                }
            }
            
            // Step 4: Check matching words
            for (let pair of qaPairs) {
                for (let word of pair.matching_words) {
                    if (q.includes(word.toLowerCase())) {
                        return pair.answer;
                    }
                }
            }
            
            // Step 5: Partial match in Q&A keys with improved scoring
            let bestPartialMatch = null;
            let bestPartialScore = 0;
            
            for (let key in qaData) {
                let score = 0;
                
                // Exact substring match
                if (key.includes(q) || q.includes(key)) score += 5;
                
                // Word-by-word matching
                const keyWords = key.split(' ');
                const qWords = q.split(' ');
                const matches = keyWords.filter(word => qWords.includes(word));
                score += matches.length;
                
                // Bonus for longer matches
                if (matches.length >= keyWords.length / 2) score += 2;
                
                if (score > bestPartialScore && score >= 2) {
                    bestPartialScore = score;
                    bestPartialMatch = qaData[key];
                }
            }
            
            if (bestPartialMatch) return bestPartialMatch;
            
            // Step 6: Search in PDF chunks with better matching
            const words = q.split(' ').filter(w => w.length > 3);
            let bestChunk = null;
            let bestChunkScore = 0;
            
            for (let chunk of pdfChunks) {
                const chunkLower = chunk.toLowerCase();
                let score = 0;
                
                for (let word of words) {
                    if (chunkLower.includes(word)) {
                        score += word.length; // Longer words get higher score
                    }
                }
                
                if (score > bestChunkScore && score >= 8) {
                    bestChunkScore = score;
                    bestChunk = chunk;
                }
            }
            
            if (bestChunk) {
                return bestChunk.substring(0, 300) + '...';
            }
            
            // Step 7: Return helpful message
            return `I don't have specific information about '${question}'. Try asking about: offset, demand creation, verification, approval, entity mapping, due dates, pole rent, reports, security deposit, or advance collection.`;
        }
        
        function sendMessage() {
            const input = document.getElementById('input');
            const chat = document.getElementById('chat');
            const question = input.value.trim();
            
            if (!question) return;
            
            chat.innerHTML += '<div class="message user">' + question + '</div>';
            
            const answer = findAnswer(question);
            chat.innerHTML += '<div class="message bot">' + answer + '</div>';
            
            input.value = '';
            chat.scrollTop = chat.scrollHeight;
        }
        
        function ask(question) {
            document.getElementById('input').value = question;
            sendMessage();
        }
        
        document.getElementById('input').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') sendMessage();
        });
    </script>
</body>
</html>